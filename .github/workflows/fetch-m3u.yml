name: ðŸ“‚ Fetch M3UPT.m3u

on:
  workflow_dispatch:
  schedule:
    - cron: "0 * * * *"  # Executa a cada hora, no inÃ­cio de cada hora
permissions:  
      contents: write

jobs:
  fetch-file:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Create M3U directory
      run: mkdir -p M3U

    - name: Download M3UPT.m3u
      run: |
        wget https://raw.githubusercontent.com/LITUATUI/M3UPT/main/M3U/M3UPT.m3u -O M3U/M3UPT.m3u

    - name: Add content to the end of M3UPT.m3u
      run: |
        echo '#EXTINF:-1 group-title="TV" tvg-id="CMTV.pt" tvg-logo="https://raw.githubusercontent.com/LITUATUI/M3UPT/main/logos/RTP1.png",CMTV' >> M3U/M3UPT.m3u
        echo '#EXTVLCOPT:http-user-agent=Firefox' >> M3U/M3UPT.m3u
        echo 'https://moonlight.wideiptv.top/CMTVPT/index.fmp4.m3u8?token=d0e8b188a250d7c1a72a10c2f0e9802f1b6d7654-b29e960442479cd1b7fed26e921c6da1-1734369065-1734358265' >> M3U/M3UPT.m3u
        echo '' >> M3U/M3UPT.m3u
        echo '#EXTINF:-1 group-title="TV" tvg-id="NewsNow.pt" tvg-logo="https://www.freeshot.live/upload/source/NewsNow-PT-LOGO.png",NEWS NOW' >> M3U/M3UPT.m3u
        echo '#EXTVLCOPT:http-user-agent=Firefox' >> M3U/M3UPT.m3u
        echo 'https://moonlight.wideiptv.top/NewsNowPT/index.fmp4.m3u8?token=7d799a3ca8bc9a23317cee8e1f9acb77101a6e8a-8a8044174d16f03b4da70a717bd3e292-1734370665-1734359865' >> M3U/M3UPT.m3u
        echo '' >> M3U/M3UPT.m3u
        echo '#EXTINF:-1 group-title="TV" tvg-id="Sportv0.pt" tvg-logo="https://www.freeshot.live/upload/source/Sport_tv_+_logo.png",Sportv+' >> M3U/M3UPT.m3u
        echo '#EXTVLCOPT:http-user-agent=Firefox' >> M3U/M3UPT.m3u
        echo 'https://love2live.wideiptv.top/SPTPlus/index.fmp4.m3u8?token=30332ac95e8095af01e962cf4a9028bd09ec83ff-33089a64ba9e79c39faa24ca2df1d9e8-1734370955-1734360155' >> M3U/M3UPT.m3u
        echo '' >> M3U/M3UPT.m3u
        echo '#EXTINF:-1 group-title="TV" tvg-id="Sportv1.pt" tvg-logo="https://www.freeshot.live/upload/source/Sport_tv_1_logo.png",Sportv1' >> M3U/M3UPT.m3u
        echo '#EXTVLCOPT:http-user-agent=Firefox' >> M3U/M3UPT.m3u
        echo 'https://love2live.wideiptv.top/SPT1/index.fmp4.m3u8?token=f836bd97656bcc082fe39b876483b97271d8fc45-ad017ba9742f51e8cfb775388dca8172-1734370883-1734360083' >> M3U/M3UPT.m3u
        echo '' >> M3U/M3UPT.m3u
        echo '#EXTINF:-1 group-title="TV" tvg-id="DAZN1.pt" tvg-logo="https://www.freeshot.live/upload/source/Eleven-Sports-1_logo.png",DAZN1' >> M3U/M3UPT.m3u
        echo '#EXTVLCOPT:http-user-agent=Firefox' >> M3U/M3UPT.m3u
        echo 'https://love2live.wideiptv.top/ELEVEN1/index.fmp4.m3u8?token=9e26db5d50df71ce2c508155c23e3aee3ba7a686-b7dcffa58f3bd6ca655f4ff550d2e893-1734380336-1734369536' >> M3U/M3UPT.m3u
        echo '' >> M3U/M3UPT.m3u
        echo '#EXTINF:-1 group-title="TV" tvg-id="DAZN2.pt" tvg-logo="https://www.freeshot.live/upload/source/Eleven-Sports-2-logo.png",DAZN2' >> M3U/M3UPT.m3u
        echo '#EXTVLCOPT:http-user-agent=Firefox' >> M3U/M3UPT.m3u
        echo 'https://love2live.wideiptv.top/ELEVEN2/index.fmp4.m3u8?token=902cddfa5c3c9958382ecdb0b1ccab4aec8b6081-6a9be060c5a9f982afa70a05da40b7b4-1734380383-1734369583' >> M3U/M3UPT.m3u
        echo '' >> M3U/M3UPT.m3u
        echo '#EXTINF:-1 group-title="TV" tvg-id="Radical.pt" tvg-logo="https://www.freeshot.live/upload/source/SIC-Radical-logo.png",Radical' >> M3U/M3UPT.m3u
        echo '#EXTVLCOPT:http-user-agent=Firefox' >> M3U/M3UPT.m3u
        echo 'https://moonlight.wideiptv.top/SICRadical/index.fmp4.m3u8?token=080ab04cda5ebe0db4ee5727a161ad0d998b1fca-d5872d38b3246e984ed197cd7044aeae-1734380548-1734369748' >> M3U/M3UPT.m3u
        echo '' >> M3U/M3UPT.m3u
        echo '#EXTINF:-1 group-title="TV" tvg-id="Brazzers.pt" tvg-logo="https://www.freeshot.live/upload/source/Brazzers_TV_Europe-logo.png",Brazzers' >> M3U/M3UPT.m3u
        echo '#EXTVLCOPT:http-user-agent=Firefox' >> M3U/M3UPT.m3u
        echo 'https://moonlight.wideiptv.top/BrazzersTVEU/index.fmp4.m3u8?token=17bed420b1560ff5f5f791764d4163a9ecd8188b-65bdd66382189e9e613f7e6facf000c5-1734380788-1734369988' >> M3U/M3UPT.m3u
        echo '' >> M3U/M3UPT.m3u
        echo '#EXTINF:-1 group-title="TV" tvg-id="HOT.pt" tvg-logo="https://www.freeshot.live/upload/source/Canal-HOT-logo.png",HOT' >> M3U/M3UPT.m3u
        echo '#EXTVLCOPT:http-user-agent=Firefox' >> M3U/M3UPT.m3u
        echo 'https://moonlight.wideiptv.top/HOT/index.fmp4.m3u8?token=8c557d1ddc3cb7a95ed8c59e3663ce01d04220fd-954787c6055ad08c3d5215fa9a0c5389-1734380910-1734370110' >> M3U/M3UPT.m3u
        echo '' >> M3U/M3UPT.m3u

    - name: Encurtar URL com TinyURL
      run: |
        SHORT_URL=$(curl -s "http://tinyurl.com/api-create.php?url=https://raw.githubusercontent.com/lfilipe/M3U/refs/heads/main/M3U/M3UPT.m3u")
        echo "Link Encurtado: $SHORT_URL"
      
    - name: Commit and push changes
      run: |
        git config user.name "github-actions[bot]"
        git config user.email "github-actions[bot]@users.noreply.github.com"
        git add M3U/M3UPT.m3u
        git commit -m "Added new IPTV streams to M3UPT.m3u"
        git push
